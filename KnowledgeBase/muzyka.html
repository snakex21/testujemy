<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Muzyka - Lokalna Baza Wiedzy</title>
    <link rel="stylesheet" href="style.css">

</head>
<body>
    <nav id="table-of-contents">
        <h4>Spis Tre≈õci</h4>
        <ul id="toc-list"></ul>
    </nav>

    <div class="main-wrapper">
        <header>
            <h1>üéµ Muzyka - Kompletna Baza</h1>
            <a href="index.html" class="back-button">‚Üê Powr√≥t do strony g≈Ç√≥wnej</a>
        </header>

        <nav class="tabs">
            <!-- Poni≈ºej znajduje siƒô finalna wersja paska nawigacyjnego. -->

            <a href="ai.html" class="tab-link">
                <img src="icons/brain.svg" alt="AI">
            </a>
            <a href="edukacja.html" class="tab-link">
                <img src="icons/education-icon.svg" alt="Edukacja">
            </a>
            <a href="ebooki.html" class="tab-link">
                <img src="icons/ebook.png" alt="eBooki">
            </a>
            <a href="filmy.html" class="tab-link">
                <img src="icons/play-video-150x150.png" alt="Filmy">
            </a>
            <a href="gry.html" class="tab-link">
                <img src="icons/joystick-150x150.png" alt="Gry">
            </a>
            <a href="komiksy.html" class="tab-link">
                <img src="icons/comic-book.png" alt="Komiksy">
            </a>
            <a href="linux-macos.html" class="tab-link">
                <img src="icons/linux-logo.svg" alt="Linux i macOS">
            </a>
            <a href="livetv.html" class="tab-link">
                <img src="icons/live-broadcast.png" alt="Live TV">
            </a>
            <a href="media-spolecznosciowe.html" class="tab-link">
                <img src="icons/users.svg" alt="Media Spo≈Çeczno≈õciowe">
            </a>
            <a href="miedzynarodowe.html" class="tab-link">
                <img src="icons/globe.svg" alt="Miƒôdzynarodowe">
            </a>
            <a href="muzyka.html" class="tab-link active">
                <img src="icons/music-150x150.png" alt="Muzyka">
            </a>
            <a href="narzedzia-graficzne.html" class="tab-link">
                <img src="icons/paint-brush.svg" alt="Narzƒôdzia Graficzne">
            </a>
            <a href="narzedzia-plikow.html" class="tab-link">
                <img src="icons/file-tools.svg" alt="Narzƒôdzia Plikowe">
            </a>
            <a href="narzedzia-systemowe.html" class="tab-link">
                <img src="icons/system-tools.svg" alt="Narzƒôdzia Systemowe">
            </a>
            <a href="narzedzia-tekstowe.html" class="tab-link">
                <img src="icons/text-tools.svg" alt="Narzƒôdzia Tekstowe">
            </a>
            <a href="pobieranie.html" class="tab-link">
                <img src="icons/download.svg" alt="Pobieranie">
            </a>
            <a href="poradnik-gry.html" class="tab-link">
                <img src="icons/guide-book.svg" alt="Poradnik Gracza">
            </a>
            <a href="pozostale.html" class="tab-link">
                <img src="icons/box.svg" alt="Pozosta≈Çe">
            </a>
            <a href="programowanie.html" class="tab-link">
                <img src="icons/code-icon.svg" alt="Programowanie">
            </a>
            <a href="privacy.html" class="tab-link">
                <img src="icons/shield.svg" alt="Prywatno≈õƒá">
            </a>
            <a href="rozszerzenia.html" class="tab-link">
                <img src="icons/puzzle-icon.svg" alt="Rozszerzenia">
            </a>
            <a href="sport.html" class="tab-link">
                <img src="icons/basketball-150x150.png" alt="Sport">
            </a>
            <a href="telefony.html" class="tab-link">
                <img src="icons/smartphone.svg" alt="Telefony">
            </a>
            <a href="torrenty.html" class="tab-link">
                <img src="icons/utorrent-150x150.png" alt="Torrenty">
            </a>
            <a href="wideo.html" class="tab-link">
                <img src="icons/film-icon.svg" alt="Wideo">
            </a>
            <a href="wschodni-skarbiec.html" class="tab-link">
                <img src="icons/woman-150x150.png" alt="Wschodni Skarbiec">
            </a>
        </nav>

        <main class="button-container">
            <div id="content">
                <div class="loading">≈Åadowanie...</div>
            </div>
        </main>
    </div>

    <script src="dane/muzyka-dane.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const content = document.getElementById('content');
            const tocList = document.getElementById('toc-list');
            if (!content || !tocList || typeof pageData === 'undefined') {
                console.error('Required elements or data not found.');
                if (content) content.innerHTML = '<div class="error">WystƒÖpi≈Ç b≈ÇƒÖd podczas ≈Çadowania danych.</div>';
                return;
            }

            content.innerHTML = ''; // Usu≈Ñ "≈Åadowanie..."

            // --- START NOWO≈öCI ---
            const searchContainer = document.createElement('div');
            searchContainer.className = 'search-container';
            const searchBox = document.createElement('input');
            searchBox.type = 'text';
            searchBox.className = 'search-box';
            searchBox.id = 'searchBox';
            searchBox.placeholder = 'üîç Wyszukaj serwis lub narzƒôdzie muzyczne...';
            searchContainer.appendChild(searchBox);
            content.appendChild(searchContainer);
            // --- KONIEC NOWO≈öCI ---

            const createLink = (link, isFeatured = false) => {
                const a = document.createElement('a');
                a.href = link.url;
                a.className = isFeatured ? 'play-button featured' : `play-button ${link.category || ''}`;
                a.target = '_blank';
                
                let innerHTML = `<img src="icons/music-icon.svg" alt="Link">`;
                
                if (isFeatured) {
                    innerHTML += `
                        <span class="title">${link.name}</span>
                        ${link.badge ? `<span class="badge">${link.badge}</span>` : ''}
                        ${link.description ? `<span class="description">${link.description}</span>` : ''}
                    `;
                } else {
                    innerHTML += ` ${link.isNew ? '‚≠ê' : ''} ${link.name} ${link.tag ? `<span class="tag">${link.tag}</span>` : ''}`;
                }
                
                a.innerHTML = innerHTML;
                return a;
            };

            if (pageData.featured && pageData.featured.length > 0) {
                const featuredSection = document.createElement('div');
                featuredSection.className = 'featured-section';
                
                const h2 = document.createElement('h2');
                h2.textContent = '‚≠ê TOP REKOMENDACJE - NAJLEPSZE ≈πR√ìD≈ÅA';
                featuredSection.appendChild(h2);
                
                pageData.featured.forEach(link => {
                    featuredSection.appendChild(createLink(link, true));
                });
                content.appendChild(featuredSection);
            }

            const createSection = (section) => {
                const sectionContainer = document.createElement('div');
                sectionContainer.id = section.id;

                const h2 = document.createElement('h2');
                h2.textContent = section.title;
                sectionContainer.appendChild(h2);

                if (section.subsections && section.subsections.length > 0) {
                    section.subsections.forEach(sub => {
                        const h3 = document.createElement('h3');
                        h3.textContent = sub.title;
                        sectionContainer.appendChild(h3);
                        
                        const grid = document.createElement('div');
                        grid.className = 'category-grid';
                        sub.links.forEach(link => {
                            grid.appendChild(createLink(link));
                        });
                        sectionContainer.appendChild(grid);
                    });
                } else if (section.links && section.links.length > 0) {
                    const grid = document.createElement('div');
                    grid.className = 'category-grid';
                    section.links.forEach(link => {
                        grid.appendChild(createLink(link));
                    });
                    sectionContainer.appendChild(grid);
                }
                
                return sectionContainer;
            };

            pageData.sections.forEach(section => {
                content.appendChild(createSection(section));
                const li = document.createElement('li');
                const a = document.createElement('a');
                a.href = `#${section.id}`;
                a.textContent = section.title;
                li.appendChild(a);
                tocList.appendChild(li);
            });

            if (pageData.infoBox) {
                const infoBox = document.createElement('div');
                infoBox.className = 'info-box';
                infoBox.innerHTML = `<h3>${pageData.infoBox.title}</h3><ul>${pageData.infoBox.items.map(item => `<li>${item}</li>`).join('')}</ul>`;
                content.appendChild(infoBox);
            }

            if (pageData.warningBox) {
                const warningBox = document.createElement('div');
                warningBox.className = 'warning-box';
                warningBox.innerHTML = `<h3>${pageData.warningBox.title}</h3><ul>${pageData.warningBox.items.map(item => `<li>${item}</li>`).join('')}</ul>`;
                content.appendChild(warningBox);
            }
            
            // --- START NOWO≈öCI ---
            const initializeEventListeners = () => {
                const searchBox = document.getElementById('searchBox');
                if (searchBox) {
                    searchBox.addEventListener('input', (e) => {
                        const searchTerm = e.target.value.toLowerCase();
                        const buttons = document.querySelectorAll('.play-button');
                        
                        buttons.forEach(button => {
                            const text = button.textContent.toLowerCase();
                            if (text.includes(searchTerm)) {
                                button.style.display = 'flex';
                            } else {
                                button.style.display = 'none';
                            }
                        });
                    });
                }
            };
            initializeEventListeners();
            // --- KONIEC NOWO≈öCI ---

            const initializeScrollSpy = () => {
                const sections = pageData.sections.map(s => document.getElementById(s.id));
                const tocLinks = document.querySelectorAll('#toc-list a');

                const onScroll = () => {
                    let currentSection = null;
                    sections.forEach(section => {
                        const sectionTop = section.offsetTop - 150;
                        if (window.scrollY >= sectionTop) {
                            currentSection = section.id;
                        }
                    });

                    tocLinks.forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('href') === `#${currentSection}`) {
                            link.classList.add('active');
                        }
                    });
                };

                window.addEventListener('scroll', onScroll);
                onScroll();
            };

            initializeScrollSpy();
        });
    </script>
</body>
</html>