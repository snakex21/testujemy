<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Media Spo≈Çeczno≈õciowe - Lokalna Baza Wiedzy</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- === SPIS TRE≈öCI === -->
    <nav id="table-of-contents">
        <h4>Spis Tre≈õci</h4>
        <ul>
            <!-- Linki zostanƒÖ wygenerowane przez JavaScript -->
        </ul>
    </nav>

    <!-- === KONTENER G≈Å√ìWNY === -->
    <div class="main-wrapper">
        <header>
            <h1>üì± Media Spo≈Çeczno≈õciowe - Kompletna Baza</h1>
            <a href="index.html" class="back-button">‚Üê Powr√≥t do strony g≈Ç√≥wnej</a>
        </header>

        <nav class="tabs">
            <!-- Poni≈ºej znajduje siƒô finalna wersja paska nawigacyjnego. -->

            <a href="ai.html" class="tab-link">
                <img src="icons/brain.svg" alt="AI">
            </a>
            <a href="edukacja.html" class="tab-link">
                <img src="icons/education-icon.svg" alt="Edukacja">
            </a>
            <a href="ebooki.html" class="tab-link">
                <img src="icons/ebook.png" alt="eBooki">
            </a>
            <a href="filmy.html" class="tab-link">
                <img src="icons/play-video-150x150.png" alt="Filmy">
            </a>
            <a href="gry.html" class="tab-link">
                <img src="icons/joystick-150x150.png" alt="Gry">
            </a>
            <a href="komiksy.html" class="tab-link">
                <img src="icons/comic-book.png" alt="Komiksy">
            </a>
            <a href="linux-macos.html" class="tab-link">
                <img src="icons/linux-logo.svg" alt="Linux i macOS">
            </a>
            <a href="livetv.html" class="tab-link">
                <img src="icons/live-broadcast.png" alt="Live TV">
            </a>
            <a href="media-spolecznosciowe.html" class="tab-link active">
                <img src="icons/users.svg" alt="Media Spo≈Çeczno≈õciowe">
            </a>
            <a href="miedzynarodowe.html" class="tab-link">
                <img src="icons/globe.svg" alt="Miƒôdzynarodowe">
            </a>
            <a href="muzyka.html" class="tab-link">
                <img src="icons/music-150x150.png" alt="Muzyka">
            </a>
            <a href="narzedzia-graficzne.html" class="tab-link">
                <img src="icons/paint-brush.svg" alt="Narzƒôdzia Graficzne">
            </a>
            <a href="narzedzia-plikow.html" class="tab-link">
                <img src="icons/file-tools.svg" alt="Narzƒôdzia Plikowe">
            </a>
            <a href="narzedzia-systemowe.html" class="tab-link">
                <img src="icons/system-tools.svg" alt="Narzƒôdzia Systemowe">
            </a>
            <a href="narzedzia-tekstowe.html" class="tab-link">
                <img src="icons/text-tools.svg" alt="Narzƒôdzia Tekstowe">
            </a>
            <a href="pobieranie.html" class="tab-link">
                <img src="icons/download.svg" alt="Pobieranie">
            </a>
            <a href="poradnik-gry.html" class="tab-link">
                <img src="icons/guide-book.svg" alt="Poradnik Gracza">
            </a>
            <a href="pozostale.html" class="tab-link">
                <img src="icons/box.svg" alt="Pozosta≈Çe">
            </a>
            <a href="programowanie.html" class="tab-link">
                <img src="icons/code-icon.svg" alt="Programowanie">
            </a>
            <a href="privacy.html" class="tab-link">
                <img src="icons/shield.svg" alt="Prywatno≈õƒá">
            </a>
            <a href="rozszerzenia.html" class="tab-link">
                <img src="icons/puzzle-icon.svg" alt="Rozszerzenia">
            </a>
            <a href="sport.html" class="tab-link">
                <img src="icons/basketball-150x150.png" alt="Sport">
            </a>
            <a href="telefony.html" class="tab-link">
                <img src="icons/smartphone.svg" alt="Telefony">
            </a>
            <a href="torrenty.html" class="tab-link">
                <img src="icons/utorrent-150x150.png" alt="Torrenty">
            </a>
            <a href="wideo.html" class="tab-link">
                <img src="icons/film-icon.svg" alt="Wideo">
            </a>
            <a href="wschodni-skarbiec.html" class="tab-link">
                <img src="icons/woman-150x150.png" alt="Wschodni Skarbiec">
            </a>
        </nav>

        <main class="button-container">
            <div id="content">
                <div class="loading">≈Åadowanie link√≥w...</div>
            </div>
        </main>
    </div> <!-- Koniec .main-wrapper -->

    <!-- Wczytanie danych z zewnƒôtrznego pliku JS -->
    <script src="dane/media-spolecznosciowe-dane.js"></script>

    <!-- Skrypt, kt√≥ry wy≈õwietli dane i zarzƒÖdza spisem tre≈õci -->
    <script>
        const socialIconSvg = `data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>`;
        
        // Funkcja do tworzenia linku
        function createLink(link, className = '') {
            const a = document.createElement('a');
            a.href = link.url;
            a.className = `play-button ${className} ${link.class || ''}`;
            a.target = '_blank';

            const img = document.createElement('img');
            img.src = socialIconSvg;
            img.alt = 'Narzƒôdzie spo≈Çeczno≈õciowe';
            a.appendChild(img);

            a.appendChild(document.createTextNode(` ${link.name}`));

            if (link.tag) {
                const span = document.createElement('span');
                span.className = 'tag';
                span.textContent = link.tag;
                a.appendChild(document.createTextNode(' '));
                a.appendChild(span);
            }
            return a;
        }

        // Funkcja do tworzenia sekcji featured
        function createFeaturedSection(featured) {
            const div = document.createElement('div');
            div.className = 'featured-section section-container';
            div.id = 'featured'; 
            const h2 = document.createElement('h2');
            h2.textContent = featured.title;
            div.appendChild(h2);
            
            featured.links.forEach(link => {
                const a = document.createElement('a');
                a.href = link.url;
                a.className = 'play-button featured';
                a.target = '_blank';

                const featuredContent = document.createElement('div');
                featuredContent.className = 'featured-content';

                const img = document.createElement('img');
                img.src = socialIconSvg;
                img.alt = 'Narzƒôdzie spo≈Çeczno≈õciowe';
                featuredContent.appendChild(img);

                const featuredText = document.createElement('div');
                featuredText.className = 'featured-text';
                
                const titleSpan = document.createElement('span');
                titleSpan.className = 'title';
                titleSpan.textContent = link.title;
                featuredText.appendChild(titleSpan);

                const descriptionSpan = document.createElement('span');
                descriptionSpan.className = 'description';
                descriptionSpan.textContent = link.description;
                featuredText.appendChild(descriptionSpan);

                featuredContent.appendChild(featuredText);
                a.appendChild(featuredContent);

                const badgeSpan = document.createElement('span');
                badgeSpan.className = 'badge';
                badgeSpan.textContent = link.badge;
                a.appendChild(badgeSpan);
                
                div.appendChild(a);
            });
            return div;
        }

        // Funkcja do tworzenia zwyk≈Çej sekcji
        function createSection(section) {
            const container = document.createElement('div');
            container.className = 'section-container';
            container.id = section.id;
            const h2 = document.createElement('h2');
            h2.textContent = section.title;
            container.appendChild(h2);
            const grid = document.createElement('div');
            grid.className = 'category-grid';
            section.links.forEach(link => {
                grid.appendChild(createLink(link, section.class));
            });
            container.appendChild(grid);
            return container;
        }
        
        // Funkcja do tworzenia info box√≥w
        function createInfoBoxes() {
            const div = document.createElement('div');
            div.id = 'info';
            div.className = 'section-container';
            div.innerHTML = `
                <div class="info-box">
                    <h3>üí° Wskaz√≥wki i Bezpiecze≈Ñstwo</h3>
                    <ul>
                        <li><strong>Uwa≈ºaj na ToS:</strong> Korzystanie z nieoficjalnych klient√≥w (np. do Discorda) jest sprzeczne z regulaminem i mo≈ºe prowadziƒá do blokady konta.</li>
                        <li><strong>Chro≈Ñ Prywatno≈õƒá:</strong> U≈ºywaj alternatywnych frontend√≥w (np. Nitter, Invidious), aby przeglƒÖdaƒá tre≈õci bez ≈õledzenia.</li>
                        <li><strong>AdBlock jest kluczowy:</strong> Wiele narzƒôdzi i stron spo≈Çeczno≈õciowych zawiera reklamy. U≈ºywaj rozszerze≈Ñ blokujƒÖcych.</li>
                        <li><strong>Poznaj Fediverse:</strong> Rozwa≈º alternatywy takie jak Mastodon, Lemmy czy Bluesky, kt√≥re dajƒÖ wiƒôkszƒÖ kontrolƒô nad danymi i tre≈õciƒÖ.</li>
                    </ul>
                </div>`;
            return div;
        }
        
        // Inicjalizacja "Scroll Spy" do pod≈õwietlania link√≥w w TOC
        function initializeScrollSpy() {
            const sections = document.querySelectorAll('.section-container');
            const tocLinks = document.querySelectorAll('#table-of-contents a');

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        tocLinks.forEach(link => {
                            link.classList.remove('active');
                            if (link.getAttribute('href').substring(1) === entry.target.id) {
                                link.classList.add('active');
                            }
                        });
                    }
                });
            }, { rootMargin: '-30% 0px -70% 0px' }); 

            sections.forEach(section => {
                observer.observe(section);
            });
        }
        
        // --- START NOWO≈öCI ---
        const initializeEventListeners = () => {
            const searchBox = document.getElementById('searchBox');
            if (searchBox) {
                searchBox.addEventListener('input', (e) => {
                    const searchTerm = e.target.value.toLowerCase();
                    const buttons = document.querySelectorAll('.play-button');
                    
                    buttons.forEach(button => {
                        const text = button.textContent.toLowerCase();
                        if (text.includes(searchTerm)) {
                            button.style.display = 'flex';
                        } else {
                            button.style.display = 'none';
                        }
                    });
                });
            }
        };
        // --- KONIEC NOWO≈öCI ---

        // G≈Ç√≥wna funkcja ≈ÇadujƒÖca dane
        function loadSocialMediaData() {
            const contentDiv = document.getElementById('content');
            const tocList = document.querySelector('#table-of-contents ul');
            
            if (typeof pageData === 'undefined') {
                 contentDiv.innerHTML = `<div class="error"><h3>B≈ÇƒÖd ≈Çadowania danych!</h3><p>Upewnij siƒô, ≈ºe plik <strong>dane/media-spolecznosciowe-dane.js</strong> istnieje.</p></div>`;
                 return;
            }

            const data = pageData;
            contentDiv.innerHTML = '';
            tocList.innerHTML = ''; 

            // --- START NOWO≈öCI ---
            const searchContainer = document.createElement('div');
            searchContainer.className = 'search-container';
            const searchBox = document.createElement('input');
            searchBox.type = 'text';
            searchBox.className = 'search-box';
            searchBox.id = 'searchBox';
            searchBox.placeholder = 'üîç Wyszukaj serwis lub narzƒôdzie...';
            searchContainer.appendChild(searchBox);
            contentDiv.appendChild(searchContainer);
            // --- KONIEC NOWO≈öCI ---

            // Dodajemy sekcjƒô polecanych
            if (data.featured) {
                contentDiv.appendChild(createFeaturedSection(data.featured));
                const li = document.createElement('li');
                li.innerHTML = `<a href="#featured">${data.featured.title}</a>`;
                tocList.appendChild(li);
            }
            
            // Dodajemy wszystkie pozosta≈Çe sekcje
            data.sections.forEach(section => {
                contentDiv.appendChild(createSection(section));
                const li = document.createElement('li');
                li.innerHTML = `<a href="#${section.id}">${section.title}</a>`;
                tocList.appendChild(li);
            });
            
            // Dodajemy pola informacyjne
            contentDiv.appendChild(createInfoBoxes());
            const li = document.createElement('li');
            li.innerHTML = `<a href="#info">üí° Wskaz√≥wki</a>`;
            tocList.appendChild(li);
            
            initializeEventListeners(); // NOWO≈öƒÜ
            initializeScrollSpy();

            // Rƒôcznie pod≈õwietlamy pierwszy element na li≈õcie po za≈Çadowaniu strony
            if (tocList.querySelector('a')) {
                tocList.querySelector('a').classList.add('active');
            }
        }

        document.addEventListener('DOMContentLoaded', loadSocialMediaData);
    </script>
</body>
</html>